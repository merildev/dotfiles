#!/usr/bin/env bash

IMG=$(xdg-user-dir PICTURES)


function setSwayBg() {
    swaybg --image "$IMG"/bkg.png --mode fill&
}


function fromUnsplash() {
    local online=$(ping -q -w1 -c1 gnu.org &>/dev/null && echo OK || echo KO)

    pkill swaybg
    setSwayBg

    if [ "$online" == "OK" ] ; then
        kill $!

        wget --quiet --output-document="${IMG}"/lck.png https://source.unsplash.com/random/2560x1440/?abstract
        wget --quiet --output-document="${IMG}"/bkg.png https://source.unsplash.com/random/2560x1440/?mountains

        setSwayBg
    fi
}

pkill swaybg
setSwayBg
